(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["stock_list"],{1169:function(t,e,n){var a=n("2d95");t.exports=Array.isArray||function(t){return"Array"==a(t)}},"1c4c":function(t,e,n){"use strict";var a=n("9b43"),o=n("5ca1"),r=n("4bf8"),s=n("1fa8"),i=n("33a4"),c=n("9def"),l=n("f1ae"),u=n("27ee");o(o.S+o.F*!n("5cc5")((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,o,f,p=r(t),d="function"==typeof this?this:Array,g=arguments.length,h=g>1?arguments[1]:void 0,v=void 0!==h,m=0,b=u(p);if(v&&(h=a(h,g>2?arguments[2]:void 0,2)),void 0==b||d==Array&&i(b))for(e=c(p.length),n=new d(e);e>m;m++)l(n,m,v?h(p[m],m):p[m]);else for(f=b.call(p),n=new d;!(o=f.next()).done;m++)l(n,m,v?s(f,h,[o.value,m],!0):o.value);return n.length=m,n}})},"205d":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"perfect_list"},[n("div",{staticStyle:{width:"100%"}},[n("div",{staticStyle:{"text-align":"left"}},[n("el-button",{on:{click:t.crowStock}},[t._v("抓取股票")]),n("el-button",{on:{click:t.crowStockDayInfo}},[t._v("抓取每日信息")])],1),n("div",{staticStyle:{"text-align":"left"}},[n("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"选择日期"},on:{change:function(e){return t.perfectList(1)}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),n("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.perfectList(1)}},model:{value:t.strategyId,callback:function(e){t.strategyId=e},expression:"strategyId"}},t._l(t.indictors,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),n("el-select",{attrs:{filterable:"",clearable:"","allow-create":"",placeholder:"请选择"},on:{change:function(e){return t.perfectList(1)}},model:{value:t.industry,callback:function(e){t.industry=e},expression:"industry"}},t._l(t.industryListData,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1),n("el-input",{attrs:{placeholder:"股票编码"},model:{value:t.stockNum,callback:function(e){t.stockNum=e},expression:"stockNum"}}),n("el-button",{attrs:{type:"warning"},on:{click:function(e){return t.perfectList(1)}}},[t._v("查询")]),n("el-button",{attrs:{type:"warning"},on:{click:t.calc}},[t._v("开始计算")])],1),t._l(t.perfectStockList,(function(e,a){return n("div",{key:a,staticClass:"perfect_img"},[n("div",[t._v(t._s(a)+","),n("span",{on:{click:function(n){return t.copyNum(e.stockNum,this)}}},[t._v(t._s(e.stockNum))]),t._v(","),n("span",{on:{click:function(n){return t.changeIndustry(e.industry)}}},[t._v(t._s(e.industry))]),t._v(","+t._s(e.score)+","+t._s(e.scoreDesc))]),n("img",{attrs:{width:"100%",src:"http://webquoteklinepic.eastmoney.com/GetPic.aspx?nid="+t.getStockNum(e)+"&UnitWidth=-6&imageType=KXL&EF=&Formula="+e.type+"&AT=0&&type=&token=44c9d251add88e27b65ed86506f6e5da&wbp2u=|0|0|0|web&_=0.07544766952719373"},on:{mousemove:t.mouthMove}}),n("div",{staticClass:"pp",style:{right:t.rightX+"px"}}),n("div",{staticClass:"pp ppx",style:{left:t.ppx+"px"}}),n("div",{staticClass:"idx_op"},[n("span",{on:{click:function(n){return t.changeImg(e,"MACD")}}},[t._v("macd")]),n("span",{on:{click:function(n){return t.changeImg(e,"KDJ")}}},[t._v("kdj")]),n("span",{on:{click:function(n){return t.changeImg(e,"CCI")}}},[t._v("cci")]),n("span",[t._v(t._s(e.upDownRange))]),n("span",[n("a",{attrs:{target:"_blank",href:"http://quote.eastmoney.com/concept/"+t.getStockNum2(e)+".html#"}},[t._v("详情")])])])])})),n("el-pagination",{staticClass:"stock-pagination",attrs:{"current-page":t.pageData.currentPage,"page-size":t.pageData.pageCount,total:t.pageData.total,"page-sizes":[10,20,50,100],layout:"sizes, total, prev, pager, next"},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],2),n("div",{staticStyle:{position:"absolute",left:"0px",top:"50px","background-color":"red"}},[t._v("aasdfasdf")])])},o=[],r=(n("f559"),n("ac6a"),n("55dd"),n("572d")),s=n("c1df"),i=n.n(s),c={name:"PerfectList",data:function(){return{rightX:3,ppx:0,indictors:[{value:"indicatorCalculator",label:"指标排序"},{value:"indicatorCalculator2",label:"指标排序2"},{value:"indicatorCalculator3",label:"指标排序3"},{value:"LH_RL_Calculator",label:"趋势计算"},{value:"beautifulCalculator",label:"完美曲线"},{value:"threeDaysUpCalculator",label:"三日联涨"},{value:"thirtyDaysUpCalculator",label:"三十日新高"},{value:"maRiseUpCalculator",label:"ma齐头向上"},{value:"topRiseUpCalculator",label:"当日涨幅"},{value:"amplitudeCalculator",label:"幅度计算排序"}],industry:"",stockNum:"",strategyId:"indicatorCalculator",date:new Date,a:123,perfectStockList:[],pageData:{currentPage:1,pageCount:100,total:0},industryListData:[]}},created:function(){this.perfectList(),this.initIndustryList()},methods:{mouthMove:function(t){console.log("mouth move",t.offsetX),this.ppx=t.offsetX},initIndustryList:function(){var t=this;Object(r["q"])().then((function(e){var n=e.data.sort((function(t,e){return t.localeCompare(e,"zh")}));t.industryListData=n}))},changeIndustry:function(t){this.industry=t,this.perfectList(1)},copyNum:function(t){navigator.clipboard.writeText(t),this.$message("copy ok "+t)},handleCurrentChange:function(t){this.pageData.currentPage=t,this.perfectList()},handleSizeChange:function(t){this.pageData.pageCount=t},calc:function(){var t={date:i()(this.date).format("YYYY-MM-DD"),strategyId:this.strategyId,stockNum:this.stockNum,pageSize:100};Object(r["c"])(t)},perfectList:function(t){var e=this;Object(r["b"])({date:i()(this.date).format("YYYY-MM-DD")}).then((function(t){e.rightX=3.7+4.23*parseInt(t.data)}));var n={date:i()(this.date).format("YYYY-MM-DD"),strategyId:this.strategyId,pageSize:100};t&&(this.pageData.currentPage=1),n.industry=this.industry,n.pageSize=this.pageData.pageCount,n.pageNum=this.pageData.currentPage,Object(r["h"])(n).then((function(t){console.log(t),t.data.forEach((function(t){t.type="KDJ"})),e.perfectStockList=t.data,e.pageData.total=t.total}))},getStockNum:function(t){return t.stockNum.startsWith("6")?"1."+t.stockNum:(t.stockNum.startsWith("3")||t.stockNum.startsWith("0"),"0."+t.stockNum)},getStockNum2:function(t){return t.stockNum.startsWith("6")?"sh"+t.stockNum:"sz"+t.stockNum},changeImg:function(t,e){t.type=e,console.log(e)},crowStock:function(){var t=this;Object(r["d"])().then((function(e){t.$message.success("ok"+JSON.stringify(e.data))}))},crowStockDayInfo:function(){var t=this;Object(r["e"])({stockNum:""}).then((function(e){t.$message.success("ok"+JSON.stringify(e.data))}))}}},l=c,u=(n("8501"),n("2877")),f=Object(u["a"])(l,a,o,!1,null,"fc0bf0da",null);e["default"]=f.exports},"2f21":function(t,e,n){"use strict";var a=n("79e5");t.exports=function(t,e){return!!t&&a((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"37c8":function(t,e,n){e.f=n("2b4c")},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"3a72":function(t,e,n){var a=n("7726"),o=n("8378"),r=n("2d00"),s=n("37c8"),i=n("86cc").f;t.exports=function(t){var e=o.Symbol||(o.Symbol=r?{}:a.Symbol||{});"_"==t.charAt(0)||t in e||i(e,t,{value:s.f(t)})}},5147:function(t,e,n){var a=n("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[a]=!1,!"/./"[t](e)}catch(o){}}return!0}},"55dd":function(t,e,n){"use strict";var a=n("5ca1"),o=n("d8e8"),r=n("4bf8"),s=n("79e5"),i=[].sort,c=[1,2,3];a(a.P+a.F*(s((function(){c.sort(void 0)}))||!s((function(){c.sort(null)}))||!n("2f21")(i)),"Array",{sort:function(t){return void 0===t?i.call(r(this)):i.call(r(this),o(t))}})},"5df3":function(t,e,n){"use strict";var a=n("02f4")(!0);n("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=a(e,n),this._i+=t.length,{value:t,done:!1})}))},"5fa1":function(t,e,n){},"67ab":function(t,e,n){var a=n("ca5a")("meta"),o=n("d3f4"),r=n("69a8"),s=n("86cc").f,i=0,c=Object.isExtensible||function(){return!0},l=!n("79e5")((function(){return c(Object.preventExtensions({}))})),u=function(t){s(t,a,{value:{i:"O"+ ++i,w:{}}})},f=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,a)){if(!c(t))return"F";if(!e)return"E";u(t)}return t[a].i},p=function(t,e){if(!r(t,a)){if(!c(t))return!0;if(!e)return!1;u(t)}return t[a].w},d=function(t){return l&&g.NEED&&c(t)&&!r(t,a)&&u(t),t},g=t.exports={KEY:a,NEED:!1,fastKey:f,getWeak:p,onFreeze:d}},"6b54":function(t,e,n){"use strict";n("3846");var a=n("cb7c"),o=n("0bfb"),r=n("9e1e"),s="toString",i=/./[s],c=function(t){n("2aba")(RegExp.prototype,s,t,!0)};n("79e5")((function(){return"/a/b"!=i.call({source:"a",flags:"b"})}))?c((function(){var t=a(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r&&t instanceof RegExp?o.call(t):void 0)})):i.name!=s&&c((function(){return i.call(this)}))},"7bbc":function(t,e,n){var a=n("6821"),o=n("9093").f,r={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],i=function(t){try{return o(t)}catch(e){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==r.call(t)?i(t):o(a(t))}},8501:function(t,e,n){"use strict";var a=n("a7e1"),o=n.n(a);o.a},8946:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"perfect_list"},[n("div",[n("div",{staticStyle:{"text-align":"left"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:10},placeholder:"请输入内容"},on:{change:t.stockListChange},model:{value:t.stockListStr,callback:function(e){t.stockListStr=e},expression:"stockListStr"}}),n("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"选择日期"},on:{change:t.cc},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._l(t.stockList,(function(e,a){return n("div",{key:a,staticClass:"perfect_img"},[n("div",[t._v(t._s(a)+","+t._s(e))]),n("img",{attrs:{width:"100%",src:"http://webquoteklinepic.eastmoney.com/GetPic.aspx?nid="+t.getStockNum(e)+"&UnitWidth=-6&imageType=KXL&EF=&Formula="+t.type+"&AT=0&&type=&token=44c9d251add88e27b65ed86506f6e5da&wbp2u=|0|0|0|web&_=0.07544766952719373"},on:{mousemove:t.mouthMove}}),n("br"),n("div",{staticClass:"pp",style:{right:t.rightX+"px"}}),n("div",{staticClass:"pp ppx",style:{left:t.ppx+"px"}}),n("div",{staticClass:"idx_op"},[n("span",{on:{click:function(n){return t.changeImg(e,"MACD")}}},[t._v("macd")]),n("span",{on:{click:function(n){return t.changeImg(e,"KDJ")}}},[t._v("kdj")]),n("span",{on:{click:function(n){return t.changeImg(e,"CCI")}}},[t._v("cci")]),n("span",[t._v(t._s(e.date))])])])}))],2)])},o=[],r=(n("f559"),n("28a5"),n("572d")),s=n("c1df"),i=n.n(s),c={name:"PerfectList",data:function(){return{ppx:0,rightX:3,num:0,stockListStr:"",stockList:[],type:"CCI",date:new Date}},created:function(){},methods:{mouthMove:function(t){console.log("mouth move",t.offsetX),this.ppx=t.offsetX},stockListChange:function(){console.log(this.stockListStr.split("\n")),this.stockList.length=0,this.stockList=this.stockListStr.split("\n")},cc:function(){var t=this;Object(r["b"])({date:i()(this.date).format("YYYY-MM-DD")}).then((function(e){t.rightX=3+4.23*parseInt(e.data)}))},getStockNum:function(t){return console.log(t),t.startsWith("6")?"1."+t:(t.startsWith("3")||t.startsWith("0"),"0."+t)},changeImg:function(t,e){this.type=e}}},l=c,u=(n("8ee0"),n("2877")),f=Object(u["a"])(l,a,o,!1,null,"91a9f9f8",null);e["default"]=f.exports},"8a81":function(t,e,n){"use strict";var a=n("7726"),o=n("69a8"),r=n("9e1e"),s=n("5ca1"),i=n("2aba"),c=n("67ab").KEY,l=n("79e5"),u=n("5537"),f=n("7f20"),p=n("ca5a"),d=n("2b4c"),g=n("37c8"),h=n("3a72"),v=n("d4c0"),m=n("1169"),b=n("cb7c"),y=n("d3f4"),k=n("4bf8"),w=n("6821"),S=n("6a99"),_=n("4630"),x=n("2aeb"),D=n("7bbc"),C=n("11e9"),O=n("2621"),P=n("86cc"),I=n("0d58"),N=C.f,j=P.f,L=D.f,T=a.Symbol,M=a.JSON,E=M&&M.stringify,R="prototype",z=d("_hidden"),A=d("toPrimitive"),F={}.propertyIsEnumerable,Y=u("symbol-registry"),W=u("symbols"),$=u("op-symbols"),X=Object[R],J="function"==typeof T&&!!O.f,B=a.QObject,U=!B||!B[R]||!B[R].findChild,K=r&&l((function(){return 7!=x(j({},"a",{get:function(){return j(this,"a",{value:7}).a}})).a}))?function(t,e,n){var a=N(X,e);a&&delete X[e],j(t,e,n),a&&t!==X&&j(X,e,a)}:j,q=function(t){var e=W[t]=x(T[R]);return e._k=t,e},G=J&&"symbol"==typeof T.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof T},V=function(t,e,n){return t===X&&V($,e,n),b(t),e=S(e,!0),b(n),o(W,e)?(n.enumerable?(o(t,z)&&t[z][e]&&(t[z][e]=!1),n=x(n,{enumerable:_(0,!1)})):(o(t,z)||j(t,z,_(1,{})),t[z][e]=!0),K(t,e,n)):j(t,e,n)},H=function(t,e){b(t);var n,a=v(e=w(e)),o=0,r=a.length;while(r>o)V(t,n=a[o++],e[n]);return t},Q=function(t,e){return void 0===e?x(t):H(x(t),e)},Z=function(t){var e=F.call(this,t=S(t,!0));return!(this===X&&o(W,t)&&!o($,t))&&(!(e||!o(this,t)||!o(W,t)||o(this,z)&&this[z][t])||e)},tt=function(t,e){if(t=w(t),e=S(e,!0),t!==X||!o(W,e)||o($,e)){var n=N(t,e);return!n||!o(W,e)||o(t,z)&&t[z][e]||(n.enumerable=!0),n}},et=function(t){var e,n=L(w(t)),a=[],r=0;while(n.length>r)o(W,e=n[r++])||e==z||e==c||a.push(e);return a},nt=function(t){var e,n=t===X,a=L(n?$:w(t)),r=[],s=0;while(a.length>s)!o(W,e=a[s++])||n&&!o(X,e)||r.push(W[e]);return r};J||(T=function(){if(this instanceof T)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(n){this===X&&e.call($,n),o(this,z)&&o(this[z],t)&&(this[z][t]=!1),K(this,t,_(1,n))};return r&&U&&K(X,t,{configurable:!0,set:e}),q(t)},i(T[R],"toString",(function(){return this._k})),C.f=tt,P.f=V,n("9093").f=D.f=et,n("52a7").f=Z,O.f=nt,r&&!n("2d00")&&i(X,"propertyIsEnumerable",Z,!0),g.f=function(t){return q(d(t))}),s(s.G+s.W+s.F*!J,{Symbol:T});for(var at="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ot=0;at.length>ot;)d(at[ot++]);for(var rt=I(d.store),st=0;rt.length>st;)h(rt[st++]);s(s.S+s.F*!J,"Symbol",{for:function(t){return o(Y,t+="")?Y[t]:Y[t]=T(t)},keyFor:function(t){if(!G(t))throw TypeError(t+" is not a symbol!");for(var e in Y)if(Y[e]===t)return e},useSetter:function(){U=!0},useSimple:function(){U=!1}}),s(s.S+s.F*!J,"Object",{create:Q,defineProperty:V,defineProperties:H,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:nt});var it=l((function(){O.f(1)}));s(s.S+s.F*it,"Object",{getOwnPropertySymbols:function(t){return O.f(k(t))}}),M&&s(s.S+s.F*(!J||l((function(){var t=T();return"[null]"!=E([t])||"{}"!=E({a:t})||"{}"!=E(Object(t))}))),"JSON",{stringify:function(t){var e,n,a=[t],o=1;while(arguments.length>o)a.push(arguments[o++]);if(n=e=a[1],(y(e)||void 0!==t)&&!G(t))return m(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!G(e))return e}),a[1]=e,E.apply(M,a)}}),T[R][A]||n("32e9")(T[R],A,T[R].valueOf),f(T,"Symbol"),f(Math,"Math",!0),f(a.JSON,"JSON",!0)},"8ee0":function(t,e,n){"use strict";var a=n("5fa1"),o=n.n(a);o.a},a7e1:function(t,e,n){},ac4d:function(t,e,n){n("3a72")("asyncIterator")},af50:function(t,e,n){},bc8f:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"stock-wrapper"},[n("ul",{staticClass:"board-list"},t._l(t.stockBoardData,(function(e,a){return n("li",{key:a,staticClass:"board-item",class:e.range>=0?"red":"green"},[n("div",{staticClass:"name"},[t._v(t._s(e.name))]),n("div",{staticClass:"value"},[t._v(t._s(e.value))]),n("div",{staticClass:"bottom"},[n("span",{staticClass:"left"},[n("i",{class:e.range>=0?"el-icon-top":"el-icon-bottom"}),t._v("\n          "+t._s(e.range)+"\n        ")]),n("span",{staticClass:"right"},[n("i",{class:e.rate>=0?"el-icon-top":"el-icon-bottom"}),t._v("\n          "+t._s(e.rate)+"\n        ")])])])})),0),n("div",{staticClass:"operate-box"},[n("el-button",{staticClass:"operate-btn",attrs:{type:"primary",size:"medium"},on:{click:function(e){t.operateDialogStatus=!0}}},[t._v("操作")]),n("el-dialog",{attrs:{title:"操作",width:"70%",visible:t.operateDialogStatus},on:{"update:visible":function(e){t.operateDialogStatus=e}}},[n("div",[n("el-button",{staticStyle:{"margin-left":"16px"},attrs:{round:"",size:"mini",type:"primary"},on:{click:function(e){return t.updateStockList()}}},[t._v("更新股票列表")]),n("div",[t._v(t._s(t.stockListProgressTaskInfo))]),n("el-progress",{attrs:{"text-inside":!0,percentage:t.percentageStockListProgressData}}),n("el-divider",[n("div",{staticStyle:{display:"flex"}},[n("el-button",{staticStyle:{"margin-left":"16px"},attrs:{icon:"el-icon-refresh",round:"",size:"mini",type:"primary"},on:{click:function(e){return t.updateStockTimeInfo()}}},[t._v("更新股票详情数据")]),n("el-button",{staticStyle:{"margin-left":"16px"},attrs:{icon:"el-icon-refresh",round:"",size:"mini",type:"danger"},on:{click:function(e){return t.stopUpdateTaskByType(1)}}},[t._v("停止更新")])],1)]),n("div",[t._v(t._s(t.stockDetailProgressTaskInfo))]),n("el-progress",{attrs:{"text-inside":!0,percentage:t.percentageStockDetailProgressData}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.operateDialogStatus=!1}}},[t._v("关闭")])],1)])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"stock-table",attrs:{data:t.stockTableData,stripe:""}},[n("el-table-column",{attrs:{label:"股票编号",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{staticClass:"stock-num blue",attrs:{tag:"a",to:{name:"StockDetail",params:{stockNum:e.row.stockNum}},target:"_blank"}},[t._v(t._s(e.row.stockNum))])]}}])}),n("el-table-column",{attrs:{label:"股票名称",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{staticClass:"stock-name blue",attrs:{tag:"a",to:{name:"StockDetail",params:{stockNum:e.row.stockNum}},target:"_blank"}},[t._v(t._s(e.row.stockName))])]}}])}),n("el-table-column",{attrs:{label:"最新价",width:"90",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"stock-close",class:e.row.upDownRange.includes("-")?"green":"red"},[t._v(t._s(e.row.close))])]}}])}),n("el-table-column",{attrs:{label:"单日涨跌幅",width:"94",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"stock-upDownRange",class:e.row.upDownRange.includes("-")?"green":"red"},[t._v(t._s(e.row.upDownRange))])]}}])}),n("el-table-column",{attrs:{label:"3日涨跌幅",width:"94",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"stock-upDownRange3",class:e.row.upDownRange3.includes("-")?"green":"red"},[t._v(t._s(e.row.upDownRange3))])]}}])}),n("el-table-column",{attrs:{label:"5日涨跌幅",width:"94",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"stock-upDownRange5",class:e.row.upDownRange5.includes("-")?"green":"red"},[t._v(t._s(e.row.upDownRange5))])]}}])}),n("el-table-column",{attrs:{label:"涨跌额",width:"90",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"stock-upDownPrices",class:e.row.upDownPrices.includes("-")?"green":"red"},[t._v(t._s(e.row.upDownPrices))])]}}])}),n("el-table-column",{attrs:{label:"换手率",prop:"turnOverrate",width:"90",align:"center"}}),n("el-table-column",{attrs:{label:"振幅",prop:"amplitude",width:"90",align:"center"}}),n("el-table-column",{attrs:{label:"上市日期",prop:"listingDate",width:"120",align:"center"}}),n("el-table-column",{attrs:{label:"流通股本",prop:"totalFlowShares",align:"center"}}),n("el-table-column",{attrs:{label:"总股本",prop:"totalShares",align:"center"}})],1),n("el-pagination",{staticClass:"stock-pagination",attrs:{"current-page":t.pageData.currentPage,"page-size":t.pageData.pageCount,total:t.pageData.total,"page-sizes":[10,20,50,100],layout:"sizes, total, prev, pager, next"},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)},o=[],r=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),s=(n("c5f6"),n("572d"));function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){Object(r["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l={name:"StockList",data:function(){return{stockBoardData:[],stockTableData:[],pageData:{currentPage:1,pageCount:20,total:0},loading:!1,operateDialogStatus:!1,percentageStockListProgressData:0,percentageStockDetailProgressData:0,stockListProgressTaskInfo:"",stockDetailProgressTaskInfo:""}},created:function(){this.getStockBoardData(),this.getStockTableData(),this.initSocket()},methods:{getSocket:function(){var t=null,e="";if(e="http:"==window.location.protocol?"ws://127.0.0.1:8080/websocket/stock":"wss://127.0.0.1:8080/websocket/stock","WebSocket"in window)t=new WebSocket(e);else{if(!("MozWebSocket"in window))return void console.log("Error: WebSocket is not supported by this browser.");t=new MozWebSocket(e)}return t},initSocket:function(){var t=this.getSocket(),e=this;t.onopen=function(){console.log("Info: WebSocket connection opened.")},t.onmessage=function(t){var n=JSON.parse(t.data),a=n.taskId,o=n.totalCount,r=n.completeCount,s=n.taskInfo,i=r/o*100;0==a&&(e.percentageStockListProgressData=i.toFixed(0),e.stockListProgressTaskInfo=s),1==a&&(e.percentageStockDetailProgressData=i.toFixed(0),e.stockDetailProgressTaskInfo=s),console.log("接受消息："+n.runTask)}},getStockBoardData:function(){var t=this;Object(s["i"])().then((function(e){t.stockBoardData=e.list.map((function(t){return{name:t[1],value:t[2],range:Number((t[2]-t[6]).toFixed(2)),rate:t[3]}}))}))},getStockTableData:function(){var t=this;this.loading=!0,Object(s["l"])({currentPage:this.pageData.currentPage,pageCount:this.pageData.pageCount}).then((function(e){t.loading=!1,e.success?(t.stockTableData=e.data.list.map((function(e){return c({},e,{upDownRange:t.doubleToPercent(e.upDownRange),upDownRange3:t.doubleToPercent(e.upDownRange3),upDownRange5:t.doubleToPercent(e.upDownRange5),upDownPrices:e.upDownPrices.toFixed(2),turnOverrate:t.doubleToPercent(e.turnOverrate),amplitude:t.doubleToPercent(e.amplitude),totalFlowShares:t.formatNum(e.totalFlowShares),totalShares:t.formatNum(e.totalShares)})})),t.pageData.total=e.data.total):t.$message.error(e.message)}))},handleCurrentChange:function(t){this.pageData.currentPage=t,this.getStockTableData()},handleSizeChange:function(t){this.pageData.pageCount=t,this.getStockTableData()},updateStockList:function(){var t=this;Object(s["u"])().then((function(e){e.success?alert("成功"):t.$message.error(e.message)}))},updateStockDayInfo:function(){var t=this;Object(s["t"])().then((function(e){e.success?alert("成功"):t.$message.error(e.message)}))},updateStockTimeInfo:function(){var t=this;Object(s["v"])().then((function(e){e.success?alert("成功"):t.$message.error(e.message)}))},stopUpdateTaskByType:function(t){var e=this;Object(s["s"])({taskType:t}).then((function(t){t.success?alert("已停止"):e.$message.error(t.message)}))},handleDelete:function(t,e){console.log(t,e)}}},u=l,f=(n("c836"),n("2877")),p=Object(f["a"])(u,a,o,!1,null,"42ed3988",null);e["default"]=p.exports},c836:function(t,e,n){"use strict";var a=n("af50"),o=n.n(a);o.a},d2c8:function(t,e,n){var a=n("aae3"),o=n("be13");t.exports=function(t,e,n){if(a(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(t))}},d4c0:function(t,e,n){var a=n("0d58"),o=n("2621"),r=n("52a7");t.exports=function(t){var e=a(t),n=o.f;if(n){var s,i=n(t),c=r.f,l=0;while(i.length>l)c.call(t,s=i[l++])&&e.push(s)}return e}},d990:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticStyle:{width:"100%"}},[n("span",[n("el-button",{on:{click:t.init}},[t._v("测试")]),n("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:10},placeholder:"请输入内容"},model:{value:t.param.stockNums,callback:function(e){t.$set(t.param,"stockNums",e)},expression:"param.stockNums"}})],1),n("div",{staticStyle:{width:"100%",height:"1000px",display:"none"},attrs:{id:"k-chart"}}),n("el-button",{on:{click:t.drawLine}},[t._v("绘制")]),n("el-button",{on:{click:t.clc}},[t._v("计算")]),n("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:10},placeholder:"请输入内容"},model:{value:t.param.points,callback:function(e){t.$set(t.param,"points",e)},expression:"param.points"}}),t._m(0)],1)])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("canvas",{staticStyle:{border:"#0F0 solid 1px"},attrs:{id:"num_canvers",width:"200",height:"200"}})])}],r=(n("ac6a"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("6b54"),n("55dd"),n("28a5"),n("572d"));n("c1df");function s(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=i(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,r=!0,s=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return r=t.done,t},e:function(t){s=!0,o=t},f:function(){try{r||null==a.return||a.return()}finally{if(s)throw o}}}}function i(t,e){if(t){if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var l={data:function(){return{param:{stockNums:"603216",startTime:"2022-07-01",endTime:"2022-09-30",points:""},points:[],kChart:{},numCanvas:null,context:null,option:{title:{text:"ECharts 入门示例"},tooltip:{trigger:"axis"},toolbox:{},legend:{data:["销量"]},xAxis:{data:["衬衫","羊毛衫","雪纺衫","裤子","高跟鞋","袜子"]},yAxis:[{type:"value",name:"val",position:"left",min:12},{type:"value",name:"cci",position:"right",min:12}],series:[{name:"销量",type:"line",data:[5,20,36,10,10,20]}]}}},mounted:function(){var t=this,e=document.getElementById("k-chart");this.kChart=this.echarts.init(e),this.kChart.setOption(this.option,!0),this.numCanvas=document.getElementById("num_canvers"),this.numCanvas.onmousedown=function(){t.context=t.numCanvas.getContext("2d"),t.points=[{x:event.offsetX,y:event.offsetY}],t.context.beginPath()},this.numCanvas.onmousemove=function(){if(null!=t.context){var e=t.points[t.points.length-1];t.context.moveTo(e.x,e.y),t.context.lineTo(event.offsetX,event.offsetY),t.context.stroke(),t.points.push({x:event.offsetX,y:event.offsetY})}},this.numCanvas.onmouseout=this.numCanvas.onmouseup=function(){if(null!=t.context){t.context=null;for(var e=t.points.length,n=e/20,a=[],o=0;o<20;o++)a.push(t.numCanvas.height-t.points[Math.floor(o*n)].y);for(var r={},s=0;s<t.points.length;s++){var i=t.points[s];r[10*parseInt(i.x/10)]=i.y}for(var c in console.log(JSON.stringify(a),a.length),a=[],r)a.push(t.numCanvas.height-r[c]);console.log(JSON.stringify(a),a.length);for(var l=[],u=t.param.points.split("\n"),f=u[0].split(","),p=0;p<f.length;p++)l.push(parseFloat(f[p]));for(var d=0,g=0;g<a.length;g++)console.log(g,l[g]-a[g],l[g],a[g],d),d+=Math.pow(l[g]-a[g],2);console.log("distance:",d)}},this.init()},created:function(){this.echarts=n("313e")},methods:{fixData:function(t){function e(t){return[Math.min.apply(null,t),Math.max.apply(null,t)]}for(var n=e(t),a=[],o=0;o<20&&o<t.length;o++)a.push((t[o]-n[0])/(n[1]-n[0])*200);return a},clc:function(){for(var t=[],e=this.param.points.split("\n"),n=0;n<e.length;n++){for(var a=e[n],o=[],r=a.split(","),s=1;s<r.length;s++)o.push(parseFloat(r[s]));t.push(o)}for(var i=1;i<t.length;i++)console.log("dddd",this.distance(t[0],t[i]))},distance:function(t,e){for(var n=0,a=0;a<e.length;a++)n+=Math.pow(t[a]-e[a],2);return n},drawLine:function(){var t=this.numCanvas.getContext("2d");t.clearRect(0,0,this.numCanvas.width,this.numCanvas.height),t.stroke();for(var e=this.param.points.split("\n"),n=0;n<e.length;n++){var a=e[n],o=a.split(",");t.moveTo(10,parseInt(200-o[0]));for(var r=1;r<o.length;r++)t.lineTo(10*r,200-parseInt(o[r]));t.fillText(n,180,parseInt(200-o[o.length-1])),t.stroke()}},init:function(){var t=this;Object(r["f"])(this.param).then((function(e){var n=[],a={},o=[],r=e.data;for(var i in r){var c,l=[],u=s(r[i]);try{for(u.s();!(c=u.n()).done;){var f=c.value;l.push(f.close),a[f.date]=""}}catch(g){u.e(g)}finally{u.f()}n.push({name:i+"_close",type:"line",yAxisIndex:0,data:l}),o.push(i+"_close"),t.buildMa20(r,i,a,o,n),t.buildMa10(r,i,a,o,n),t.buildVal(r,i,a,o,n)}var p=[];for(var d in a)p.push(d);p.sort(),t.option.xAxis.data=p,t.option.series=n,t.option.legend.data=o,t.kChart.clear(),t.kChart.setOption(t.option),console.log(p),console.log(n)}))},buildMa10:function(t,e,n,a,o){var r,i=[],c=s(t[e]);try{for(c.s();!(r=c.n()).done;){var l=r.value;i.push(l.ma10),n[l.date]=""}}catch(u){c.e(u)}finally{c.f()}o.push({name:e+"_cci",type:"line",yAxisIndex:0,data:i}),a.push(e+"_cci")},buildMa20:function(t,e,n,a,o){var r,i=[],c=s(t[e]);try{for(c.s();!(r=c.n()).done;){var l=r.value;i.push(l.ma20),n[l.date]=""}}catch(u){c.e(u)}finally{c.f()}o.push({name:e+"_cci",type:"line",yAxisIndex:0,data:i}),a.push(e+"_cci")},buildVal:function(t,e,n,a,o){var r,i=[],c=s(t[e]);try{for(c.s();!(r=c.n()).done;){var l=r.value;i.push(l.volume),n[l.date]=""}}catch(u){c.e(u)}finally{c.f()}o.push({name:e+"_val",type:"line",yAxisIndex:1,data:i}),a.push(e+"_val")}}},u=l,f=n("2877"),p=Object(f["a"])(u,a,o,!1,null,null,null);e["default"]=p.exports},f559:function(t,e,n){"use strict";var a=n("5ca1"),o=n("9def"),r=n("d2c8"),s="startsWith",i=""[s];a(a.P+a.F*n("5147")(s),"String",{startsWith:function(t){var e=r(this,t,s),n=o(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),a=String(t);return i?i.call(e,a,n):e.slice(n,n+a.length)===a}})}}]);
//# sourceMappingURL=stock_list.c0831ca5.js.map